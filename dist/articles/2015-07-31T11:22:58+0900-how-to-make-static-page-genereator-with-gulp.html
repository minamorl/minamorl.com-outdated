<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1.0"><link rel="stylesheet" href="/lib/normalize.css" type="text/css"><link rel="stylesheet" href="/css/main.css" type="text/css"><title>minamorl.com</title><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></head><body><header><div class="content"><a href="/" class="logo">minamorl.com</a></div></header><div class="content"><article><h1>Gulpを用いてmarkdownから静的HTMLファイルの生成を行う</h1><time>2015-07-31T11:22:58+0900</time><div><h2 id="-">モチベーション</h2>
<p>staticなWebサイトジェネレータを探していたが何となく既存のものを使いたくなかったので、Gulpから直接生成する手段はないか検討していた</p>
<p>つまり</p>
<pre><code>gulp markdown
</code></pre><p>と入力しただけで<code>/articles/**/*.md</code>ファイルから、markdownをコンパイルした状態で自動的にJadeテンプレートを適応し、<code>/dist/articles/**/*.html</code>ファイルを生成してほしい。</p>
<h2 id="-">このサイトの実装</h2>
<pre><code class="lang-coffeescript">gulp        = require &#39;gulp&#39;
del         = require &#39;del&#39;
bower       = require &#39;gulp-bower&#39;
flatten     = require &#39;gulp-flatten&#39;
uglify      = require &#39;gulp-uglify&#39;
cond        = require &#39;gulp-if&#39;
gutil       = require &#39;gulp-util&#39;
sass        = require &#39;gulp-sass&#39;
runSequence = require &#39;run-sequence&#39;
merge       = require &#39;merge&#39;
frontMatter = require &#39;gulp-front-matter&#39;
layout      = require &#39;gulp-layout&#39;
markdown    = require &#39;gulp-markdown&#39;
jade        = require &#39;gulp-jade&#39;
fs          = require &#39;fs&#39;
rename      = require &#39;gulp-rename&#39;
tap         = require &#39;gulp-tap&#39;
path        = require &#39;path&#39;
marked      = require &#39;marked&#39;

gulp.task &#39;markdown&#39;, -&gt;
  defaultLayout =
    layout: &quot;templates/article.jade&quot;
  merged = {}
  gulp.src &#39;articles/**/*.md&#39;
    .pipe frontMatter()
    .pipe markdown()
    .pipe layout ((file) -&gt;
      merge(defaultLayout, file.frontMatter)
    )
    .pipe tap((file) -&gt;
      console.log file.path
      extname = path.extname(path)
      name =
        dirname:  path.dirname(file.path),
        basename: path.basename(file.path, extname),
      file.path = path.join name.dirname, file.frontMatter.timestamp + &quot;-&quot; + name.basename
      console.log file.path
    )
    .pipe gulp.dest(&#39;./dist/articles&#39;)
</code></pre>
</div></article></div></body></html>