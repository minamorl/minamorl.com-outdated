<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1"><link rel="stylesheet" href="../lib/normalize.css" type="text/css"><link rel="stylesheet" href="../css/main.css" type="text/css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow.min.css" type="text/css"><title>Gulpを用いてmarkdownから静的HTMLファイルの生成を行う - minamorl.com</title><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js" charset="utf-8"></script><script>hljs.initHighlightingOnLoad();</script><script src="/js/analytics.js"></script></head><body><header><div class="content"><a href="/" class="logo">minamorl.com</a></div></header><div class="content"><article><h1>Gulpを用いてmarkdownから静的HTMLファイルの生成を行う</h1><time>2015-07-31T11:22:58+0900</time><div><h2 id="-">モチベーション</h2><p>staticなWebサイトジェネレータを探していたが何となく既存のものを使いたくなかったので、Gulpから直接生成する手段はないか検討していた</p><p>つまり</p><pre><code>gulp markdown
</code></pre><p>と入力しただけで<code>/articles/**/*.md</code>ファイルから、markdownをコンパイルした状態で自動的にJadeテンプレートを適応し、<code>/dist/articles/**/*.html</code>ファイルを生成してほしい。</p><h2 id="-">このサイトの実装</h2><pre><code class="lang-coffeescript">gulp        = require &#39;gulp&#39;
frontMatter = require &#39;gulp-front-matter&#39;
layout      = require &#39;gulp-layout&#39;
markdown    = require &#39;gulp-markdown&#39;
jade        = require &#39;gulp-jade&#39;
tap         = require &#39;gulp-tap&#39;
path        = require &#39;path&#39;

// ...

gulp.task &#39;markdown&#39;, -&gt;
  defaultLayout =
    layout: &quot;templates/article.jade&quot;
  gulp.src &#39;articles/**/*.md&#39;
    .pipe frontMatter()
    .pipe markdown()
    .pipe layout ((file) -&gt;
      merge(defaultLayout, file.frontMatter)
    )
    .pipe tap((file) -&gt;
      extname = path.extname(path)
      name =
        dirname:  path.dirname(file.path),
        basename: path.basename(file.path, extname),
      file.path = path.join name.dirname, file.frontMatter.timestamp + &quot;-&quot; + name.basename
    )
    .pipe gulp.dest(&#39;./dist/articles&#39;)
</code></pre><p>gulp-front-matterはmarkdownファイルからYAML front matterをparseしてfile.frontMatterに格納して返してくれる。あとはmarkdownに処理させてlayoutからJadeをぶん投げて保存するだけ。</p><p>tap内の処理はrename時にfrontMatterの情報を使いたかったからで、普通はgulp-renameでも使えばいいと思います。</p><h2 id="-">結論</h2><p>普通にJekyllとかそのへんのジェネレータ使ったほうが幸せになれる。</p></div></article><div class="sorcial"><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'minamorl';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script></div></body></html>